--- a/PKGBUILD
+++ b/PKGBUILD
@@ -12,7 +12,6 @@ url='https://rocm.docs.amd.com/projects/HIP/en/latest/'
 license=('MIT')
 _amd_depends=('rocm-core' 'bash' 'perl' 'glibc' 'gcc-libs' 'numactl'
          'mesa' 'comgr' 'rocminfo' 'rocm-llvm' 'libelf' 'rocprofiler-register')
-_nvidia_depends=('cuda')
 makedepends=('git' 'cmake' 'python' 'python-cppheaderparser'
              "${_amd_depends[@]}" "${_nvidia_depends[@]}")
 _tag="tag=rocm-$pkgver"
@@ -27,6 +26,8 @@ _projectBaseDir="rocm-systems-rocm-$pkgver/projects"
 options=(!lto)
 
 build() {
+  patch -Np1 -d "$srcdir/$_projectBaseDir/clr" -i "$srcdir/0002-support-arm64-loongarch64-riscv64.patch"
+  patch -Np1 -d "$srcdir/$_projectBaseDir/clr" -i "$srcdir/0004-replace-llvm-mc.patch"
   local hipcc_common_args=(
     -Wno-dev
     -S "$srcdir/$pkgbase-hipcc/amd/hipcc"
@@ -58,6 +59,8 @@ build() {
   cmake "${hip_amd_args[@]}"
   cmake --build build-amd
 
+  # Use a "multi-line comment" to keep patch from rotting
+  : <<COMMENT_SEPARATOR
   local hipcc_nvidia_args=(
     "${hipcc_common_args[@]}"
     -B build-nvidia-hipcc
@@ -82,6 +85,7 @@ build() {
   )
   cmake "${hip_nvidia_args[@]}"
   cmake --build build-nvidia
+COMMENT_SEPARATOR
 }
 
 package_hip-runtime-amd() {
@@ -101,3 +105,9 @@ package_hip-runtime-nvidia() {
   DESTDIR="$pkgdir" cmake --install build-nvidia
   install -Dm644 "$srcdir/$_projectBaseDir/hip/LICENSE.md" "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
 }
+
+pkgname=($(printf "%s\n" "${pkgname[@]}" | grep -Ev '^(hip-runtime-nvidia)$'))
+source+=("0002-support-arm64-loongarch64-riscv64.patch"
+         "0004-replace-llvm-mc.patch")
+sha256sums+=('7bfa3814a41f3d6195664fe844e06cc208c9ccc7dea223e973eac88667aa1968'
+             '1779ab6d3128135fa3eb1fe8f24836ec019ccaf5f17bb91bf84824a671d83c30')
